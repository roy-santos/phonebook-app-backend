(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{88:function(e,t,n){"use strict";n.r(t);var a=n(6),c=n(0),r=n.n(c),i=n(9),o=n.n(i),s=n(24),l=n(28),u=n.n(l),d="/api/persons",j={getAll:function(){return u.a.get(d).then((function(e){return e.data}))},create:function(e){return u.a.post(d,e).then((function(e){return e.data}))},update:function(e,t){return u.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},deleteItem:function(e){return u.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))}},h=n(120),b=n(132),m=function(e){var t=e.filter,n=e.handleFilter;return Object(a.jsxs)("div",{children:[Object(a.jsx)(h.a,{variant:"h6",children:"Filter Contact List"}),Object(a.jsx)(b.a,{fullWidth:!0,variant:"outlined",size:"small",placeholder:"ex. John",value:t,onChange:n})]})},f=n(125),O=function(e){var t=e.name,n=e.handleNewName,c=e.number,r=e.handleNewNumber,i=e.handleSubmit;return Object(a.jsxs)("form",{onSubmit:i,children:[Object(a.jsx)(h.a,{variant:"h6",children:"Add New Contact"}),Object(a.jsx)("div",{children:Object(a.jsx)(b.a,{fullWidth:!0,variant:"outlined",size:"small",placeholder:"Name",value:t,onChange:n})}),Object(a.jsx)("div",{children:Object(a.jsx)(b.a,{fullWidth:!0,variant:"outlined",size:"small",placeholder:"Number",value:c,onChange:r})}),Object(a.jsx)("div",{children:Object(a.jsx)(f.a,{fullWidth:!0,variant:"contained",color:"primary",size:"small",type:"submit",children:"add"})})]})},v=n(51),x=n(126),p=n(124),g=n(127),w=n(128),N=n(129),y=n(130),C=function(e){var t=e.filter?e.contacts.filter((function(t){return t.name.toLowerCase().includes(e.filter.toLowerCase())})):e.contacts;return Object(a.jsxs)("div",{children:[Object(a.jsx)(h.a,{variant:"h6",children:"Contact List"}),Object(a.jsx)(x.a,{style:{overflow:"auto",height:200},component:p.a,children:Object(a.jsx)(g.a,{children:Object(a.jsx)(w.a,{children:t.map((function(t){return Object(a.jsx)(N.a,{style:{height:"35px"},children:Object(a.jsx)(y.a,Object(v.a)({size:"small",children:"node",variant:"body"},"children",Object(a.jsxs)(h.a,{variant:"body2",children:[t.name," : ",t.number," ",Object(a.jsx)(f.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){return n=t.name,a=t.id,void(window.confirm("Delete ".concat(n,"?"))&&(j.deleteItem(a),e.setMessage("Deleted ".concat(n)),setTimeout((function(){e.setMessage(null)}),5e3),e.setContacts(e.contacts.filter((function(e){return e.id!==a})))));var n,a},children:"Delete"})]})))},t.id)}))})})})]})},S=n(133),k=function(e){var t=e.message,n=null===t||t.includes("Deleted")||t.includes("Error")?"error":"success";return null===t?null:Object(a.jsx)("div",{children:Object(a.jsx)(S.a,{severity:n,children:t})})},E=n(131),z=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(""),o=Object(s.a)(i,2),l=o[0],u=o[1],d=Object(c.useState)(""),b=Object(s.a)(d,2),f=b[0],v=b[1],x=Object(c.useState)(""),p=Object(s.a)(x,2),g=p[0],w=p[1],N=Object(c.useState)(null),y=Object(s.a)(N,2),S=y[0],z=y[1];Object(c.useEffect)((function(){j.getAll().then((function(e){r(e)}))}),[]);return Object(a.jsx)("div",{children:Object(a.jsxs)(E.a,{container:!0,spacing:2,justify:"center",direction:"row",alignItems:"center",children:[Object(a.jsxs)(E.a,{item:!0,xs:7,children:[Object(a.jsx)(h.a,{variant:"h3",children:"Phonebook"}),Object(a.jsx)(k,{message:S})]}),Object(a.jsxs)(E.a,{item:!0,xs:7,children:[Object(a.jsx)(m,{filter:g,handleFilter:function(e){w(e.target.value)}}),Object(a.jsx)(O,{name:l,handleNewName:function(e){u(e.target.value)},number:f,handleNewNumber:function(e){v(e.target.value)},handleSubmit:function(e){e.preventDefault();var t={name:l,number:f};if(n.map((function(e){return e.name})).includes(l)){if(window.confirm("".concat(l," is already in the phonebook, replace the old number with the new one?"))){var a=n.find((function(e){return e.name===l}));j.update(a.id,t).then((function(e){z("Updated ".concat(e.name)),setTimeout((function(){z(null)}),5e3),r(n.map((function(t){return t.id!==a.id?t:e}))),u(""),v("")})).catch((function(e){e.message.includes("400")?z("Error: Number must contain at least 8 digits"):(z("Error: Contact info for ".concat(a.name," has already been removed from server")),setTimeout((function(){z(null)}),5e3),r(n.filter((function(e){return e.name!==a.name}))))}))}}else j.create(t).then((function(e){z("Added ".concat(e.name)),setTimeout((function(){z(null)}),5e3),r(n.concat(e)),u(""),v("")})).catch((function(e){e.response.data.error.includes("name")?z("Error: Name must contain at least 3 characters"):z("Error: Number must contain at least 8 digits")}))}})]}),Object(a.jsx)(E.a,{item:!0,xs:7,children:Object(a.jsx)(C,{filter:g,contacts:n,setContacts:r,setMessage:z})})]})})};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(z,{})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.fc6784fd.chunk.js.map